<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://thymeleaf.org">
<head th:replace="~{layouts/head_layout :: head('Globals')}"></head>
<body>
    <nav th:replace="~{layouts/navbar_layout :: navbar('global')}"></nav>

    <main class="container">
        <div class="card-panel teal white-text" th:if="${success}" th:text="${success}" ></div>
        <div class="card-panel red white-text" th:if="${error}" th:text="${error}" ></div>

        <div class="task-container">
            <div class="row valign-wrapper row-header">
                <div class="col s12 container-header">
                    <h3>Global pendentes:</h3>
                </div>
                <div class="col s1">
                    <a href="/global/criar" class="btn-floating btn-large waves-effect waves-light red btn-add-custom"><i class="material-icons">add</i></a>
                </div>
            </div>
            <ul>
                <div th:if="${globals!= null and globals.isEmpty() or globals == null}">
                    <p>NENHUMA GLOBAL FOI CADASTRADA.</p>
                </div>
                <li th:each="gb : ${globals}">
                    <div class="card_horizontal">
                        <div>
                            <h4 th:text="${gb.title}">Title</h4>
                            <p th:text="${gb.description}">description</p>
                        </div>
                        <div class="task-actions-container">
                            <a class='dropdown-trigger btn accent-1' th:data-target="'dropdown-' + ${gb.id}">...</a>
                            <ul th:id="'dropdown-' + ${gb.id}" class='dropdown-content'>
                                <li><a th:href="@{'/global/edit/' + ${gb.id}}"><i class="material-icons">edit</i>editar</a></li>
                                <li><a th:href="@{'/global/action/delete/'+ ${gb.id}}"><i class="material-icons">delete</i>deletar</a></li>
                            </ul>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </main>

    <footer th:replace="~{layouts/footer_layout :: footer}"></footer>
</body>
</html>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        var elems = document.querySelectorAll('.dropdown-trigger');
        var options = {
            coverTrigger: false,
            closeOnClick: false,
            hover: false,
            inDuration: 500,
            outDuration: 500,
            onOpenStart: function() {
            }
        };
        M.Dropdown.init(elems, options);
    });
</script>